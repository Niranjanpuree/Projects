<loading-gif [show]="showLoadingGif"></loading-gif>

<div class="drawer-left">
    <span></span>
    <div>
        <main class="clearfix">
            <div>
                <div class="add-form">
                    <h2>
                        Filters
                        <a class="btn larger" (click)="clearAllFacets()">CLEAR</a>
                        <a class="btn icon search larger" (click)="searchVehicleToWheelBases()">SEARCH WHEEL BASE</a>
                    </h2>

                    <div class="clearfix">
                        <div class="input-blocks clearfix">

                            <div style="width: 215px;">
                                <div style="margin-top: 10px;">
                                    <strong class="float-left">Regions</strong>
                                    <a class="float-right" (click)="clearFacet(vehicleToWheelBaseSearchViewModel.facets.regions)" style="text-decoration:underline; cursor:pointer;">Clear</a>
                                    <div class="clearfix"></div>
                                    <div class="filter-search">
                                        <input type="text" class="cinput" placeholder="Search Regions" (input)="filterRegions($event)" />
                                        <input type="submit" value="">
                                    </div>

                                    <div class="clearfix"></div>

                                    <div class="checkbox-wrap after-search" style="overflow: auto; height: 160px;">
                                        <ul>
                                            <li *ngFor="let region of regionFacet">
                                                <label class="control control--checkbox green-checkbox">
                                                    <input type="checkbox" [value]="region.name" [(ngModel)]="region.isSelected" (change)="onItemSelected($event, vehicleToWheelBaseSearchViewModel.facets.regions)">
                                                    <div class="control__indicator"></div>
                                                    <span>{{region.name}}</span>
                                                </label>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div style="margin-top: 20px;">
                                    <strong>Years</strong>

                                    <div class="select white-select" style="width: 100px;">
                                        <select [(ngModel)]="selectedStartYear" (ngModelChange)="onYearSelected()">
                                            <option value="0">--From--</option>
                                            <option *ngFor="let year of startYearFacet" [value]="year">{{year}}</option>
                                        </select>
                                        <div class="select__arrow white-select__arrow"></div>
                                    </div>
                                    <span class="fa fa-caret-right"></span>
                                    <div class="select white-select" style="width: 100px;">
                                        <select [(ngModel)]="selectedEndYear" (ngModelChange)="onYearSelected()">
                                            <option value="0">--To--</option>
                                            <option *ngFor="let year of endYearFacet" [value]="year">{{year}}</option>
                                        </select>
                                        <div class="select__arrow white-select__arrow"></div>
                                    </div>
                                </div>
                                <div style="margin-top: 20px;">
                                    <strong class="float-left">Submodels</strong>
                                    <a class="float-right" (click)="clearFacet(vehicleToWheelBaseSearchViewModel.facets.subModels, false)" style="text-decoration:underline; cursor:pointer;">Clear</a>
                                    <div class="clearfix"></div>
                                    <div class="filter-search">
                                        <input type="text" class="cinput" placeholder="Search Submodels" (input)="filterSubModels($event)" />
                                        <input type="submit" value="">
                                    </div>

                                    <div class="clearfix"></div>

                                    <div class="checkbox-wrap after-search" style="overflow: auto; height: 160px;">
                                        <ul>
                                            <li *ngFor="let subModel of subModelFacet">
                                                <label class="control control--checkbox green-checkbox">
                                                    <input type="checkbox" [value]="subModel.name" [(ngModel)]="subModel.isSelected">
                                                    <div class="control__indicator"></div>
                                                    <span>{{subModel.name}}</span>
                                                </label>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div style="width: 215px;">

                                <div style="margin-top: 10px;">
                                    <strong class="float-left">Vehicle Type Groups</strong>
                                    <a class="float-right" (click)="clearFacet(vehicleToWheelBaseSearchViewModel.facets.vehicleTypeGroups)" style="text-decoration:underline; cursor:pointer;">Clear</a>
                                    <div class="clearfix"></div>
                                    <div class="filter-search">
                                        <input type="text" class="cinput" placeholder="Search Vehicle Type Groups" (input)="filterVehicleTypeGroups($event)" />
                                        <input type="submit" value="">
                                    </div>

                                    <div class="clearfix"></div>

                                    <div class="checkbox-wrap after-search" style="overflow: auto; height: 160px;">
                                        <ul>
                                            <li *ngFor="let item of vehicleTypeGroupFacet">
                                                <label class="control control--checkbox green-checkbox">
                                                    <input type="checkbox" [value]="item.name" [(ngModel)]="item.isSelected" (change)="onItemSelected($event, vehicleToWheelBaseSearchViewModel.facets.vehicleTypeGroups)">
                                                    <div class="control__indicator"></div>
                                                    <span>{{item.name}}</span>
                                                </label>
                                            </li>
                                        </ul>
                                    </div>
                                </div>

                                <div style="margin-top: 20px;">
                                    <strong class="float-left">Makes</strong>
                                    <a class="float-right" (click)="clearFacet(vehicleToWheelBaseSearchViewModel.facets.makes)" style="text-decoration:underline; cursor:pointer;">Clear</a>
                                    <div class="clearfix"></div>
                                    <div class="filter-search">
                                        <input type="text" class="cinput" placeholder="Search Makes" (input)="filterMakes($event)" />
                                        <input type="submit" value="">
                                    </div>

                                    <div class="clearfix"></div>

                                    <div class="checkbox-wrap after-search" style="overflow: auto; height: 160px;">
                                        <ul>
                                            <li *ngFor="let make of makeFacet">
                                                <label class="control control--checkbox green-checkbox">
                                                    <input type="checkbox" [value]="make.name" [(ngModel)]="make.isSelected" (change)="onItemSelected($event, vehicleToWheelBaseSearchViewModel.facets.makes)">
                                                    <div class="control__indicator"></div>
                                                    <span>{{make.name}}</span>
                                                </label>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div style="width: 215px;">
                                <div style="margin-top: 10px;">
                                    <strong class="float-left">Vehicle Types</strong>
                                    <a class="float-right" (click)="clearFacet(vehicleToWheelBaseSearchViewModel.facets.vehicleTypes)" style="text-decoration:underline; cursor:pointer;">Clear</a>
                                    <div class="clearfix"></div>
                                    <div class="filter-search">
                                        <input type="text" class="cinput" placeholder="Search Vehicle Types" (input)="filterVehicleTypes($event)" />
                                        <input type="submit" value="">
                                    </div>

                                    <div class="clearfix"></div>

                                    <div class="checkbox-wrap after-search" style="overflow: auto; height: 160px;">
                                        <ul>
                                            <li *ngFor="let item of vehicleTypeFacet">
                                                <label class="control control--checkbox green-checkbox">
                                                    <input type="checkbox" [value]="item.name" [(ngModel)]="item.isSelected" (change)="onItemSelected($event, vehicleToWheelBaseSearchViewModel.facets.vehicleTypes)">
                                                    <div class="control__indicator"></div>
                                                    <span>{{item.name}}</span>
                                                </label>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <div style="margin-top: 20px;">
                                    <strong class="float-left">Models</strong>
                                    <a class="float-right" (click)="clearFacet(vehicleToWheelBaseSearchViewModel.facets.models)" style="text-decoration:underline; cursor:pointer;">Clear</a>
                                    <div class="clearfix"></div>
                                    <div class="filter-search">
                                        <input type="text" class="cinput" placeholder="Search Models" (input)="filterModels($event)" />
                                        <input type="submit" value="">
                                    </div>

                                    <div class="clearfix"></div>

                                    <div class="checkbox-wrap after-search" style="overflow: auto; height: 160px;">
                                        <ul>
                                            <li *ngFor="let model of modelFacet">
                                                <label class="control control--checkbox green-checkbox">
                                                    <input type="checkbox" [value]="model.name" [(ngModel)]="model.isSelected" (change)="onItemSelected($event, vehicleToWheelBaseSearchViewModel.facets.models)">
                                                    <div class="control__indicator"></div>
                                                    <span>{{model.name}}</span>
                                                </label>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </main>
    </div>
    <!-- Left split screen end -->
</div>
<!-- Right split screen start -->
<!-- Breadcrumb start -->
<div class="breadcrumb">
    <div class="center">
        <a routerLink="/system/search" class="back">Return to brake system search</a>
    </div>
</div>
<!-- Breadcrumb end -->
<div id="main">
    <!-- Main start -->
    <main class="clearfix">
        <div class="center">
            <!-- Existing Wheel Base systems start -->
            <div class="table-wrap">
                <h2 class="clearfix">
                    Existing Wheel Base
                </h2>
                <div class="ctable">
                    <table>
                        <thead>
                            <tr>
                                <td>Wheel Base ID</td>
                                <td>Wheel Base</td>
                                <td>Wheel Base Metric</td>
                            </tr>
                        </thead>
                        <tbody *ngIf="existingWheelBase">
                            <tr>
                                <td>{{existingWheelBase.id}}</td>
                                <td>{{existingWheelBase.base}}</td>
                                <td>{{existingWheelBase.wheelBaseMetric}}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Modify system form start -->
            <div class="add-form">
                <h2>
                    Select Replacement Wheel Base
                    <div class="filter-search" style="float:right;">
                        <input type="text" class="cinput" [(ngModel)]="wheelBaseIdSearchText" (keypress)="onWheelBaseIdKeyPress($event)" placeholder="Wheel Base Search">
                        <input type="submit" value="" (click)="onWheelBaseIdSearch()">
                    </div>
                </h2>
                <div class="clearfix">
                    <div class="input-blocks clearfix">
                        <div style="width:100px">
                            <strong>Wheel Base ID</strong>
                            <div class="select white-select" style="width: 220px;">
                                <label *ngIf="!replacementWheelBase || replacementWheelBase.id <= 0">N/A</label>
                                <label *ngIf="replacementWheelBase && replacementWheelBase.id > 0">{{replacementWheelBase.id}}</label>
                            </div>
                        </div>
                        <div>
                            <strong>Wheel Base, Wheel Base Metric</strong>
                            <div class="select white-select" style="width: 220px;">
                                <select [disabled]="!wheelBases || wheelBases.length==0" [(ngModel)]="replacementWheelBase.id">
                                    <option value="-1" *ngIf="!wheelBases">Loading...</option>
                                    <option value="-1" *ngIf="wheelBases">--Select Wheel Base--</option>
                                    <option *ngFor="let item of wheelBases" [value]="item.id">{{item.base}}, {{item.wheelBaseMetric}}</option>
                                </select>
                                <div class="select__arrow white-select__arrow"></div>
                            </div>
                        </div>
                    </div>

                </div>
                <div>
                    <input type="submit" value="VIEW AFFECTED ASSOCIATIONS" class="btn blue larger" (click)="onViewAffectedAssociations()">
                </div>
            </div>
            <!-- Select associations for replacement start -->
            <div class="table-wrap">
                <h2 class="clearfix" *ngIf="existingWheelBase && existingWheelBase.vehicleToWheelBases">
                    Select Associations for Replacement
                </h2>
                <div class="ctable" *ngIf="existingWheelBase && existingWheelBase.vehicleToWheelBases">
                    <ac-grid #vehicleToWheelBaseGrid [dataSource]="existingWheelBase.vehicleToWheelBases" #gd="acGrid"
                             columns='[
                 { "header":" ", "selectable": {"selected": false}},
                 { "header":"Vehicle to Wheel Base Config ID","field":"id","sortable":true,"sortedByDesc":true},
                 { "header":"Wheel Base ID",              "field":"wheelBaseId",       "sortable":true},
                 { "header":"Base Vehicle (Year, Make, Model)","field":"vehicle.yearId","sortable":true},
                 { "header":"Vehicle (Submodel, Region)","field":"vehicle.subModelName","sortable":true},
                 { "header":"Wheel Base, Wheel Base Metric (ID)","field":"wheelBase.base","sortable":true}
                 ]'
                             initialSortBy='[{"field": "id", "orderByDesc": true}]'
                             paging='{"pageSize": 10, "numberOfPagesOnPageList" : 10}'
                             (selectAllChangedEvent)="onSelectAllVehicleToWheelBase($event)" [selectAllChecked]="isSelectAllVehicleToWheelBase"
                             [thresholdRecordCount]="thresholdRecordCount">
                        <tr *ngFor="let vechicleToWheelBase of gd.items">
                            <td>
                                <label class="control control--checkbox green-checkbox">
                                    <input type="checkbox" [(ngModel)]="vechicleToWheelBase.isSelected" (change)="onVehicleToWheelBaseSelected(vechicleToWheelBase)" />
                                    <div class="control__indicator"></div>
                                </label>
                            </td>
                            <td>{{vechicleToWheelBase.id}}</td>
                            <td>{{vechicleToWheelBase.wheelBaseId}}</td>
                            <td>{{vechicleToWheelBase.vehicle.yearId}}, {{vechicleToWheelBase.vehicle.makeName}}, {{vechicleToWheelBase.vehicle.modelName}}</td>
                            <td>{{vechicleToWheelBase.vehicle.subModelName}}, {{vechicleToWheelBase.vehicle.regionName}}</td>
                            <td>{{vechicleToWheelBase.wheelBase.base}},{{vechicleToWheelBase.wheelBase.wheelBaseMetric}} ({{vechicleToWheelBase.wheelBase.id}})</td>
                        </tr>
                    </ac-grid>
                </div>


                <!-- Submit and cancel button start -->
                <div class="btns">
                    <input type="submit" value="CONTINUE" class="btn  larger" (click)="onContinue()">
                    <input type="reset" value="CANCEL" class="btn larger transparent" routerLink="/system/search">
                </div>

            </div>
        </div>

    </main>
    <!-- Main end -->
</div>
